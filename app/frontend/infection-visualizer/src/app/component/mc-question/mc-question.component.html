<div class="card mb-3">
  <div class="card-body">

    <div class="d-flex flex-column flex-md-row-reverse align-items-start gap-4">

      <!-- Image -->
      @if (imagePath !== '') {
        <img [src]="imagePath" alt="Question image" style="max-width: 600px; height: auto;"/>
      }

      <!-- Question and options -->
      <div style="flex: 1;">
        <h5 class="card-title">{{ question.text }}</h5>
        <h5>{{ question.question }}</h5>

        @for (option of shuffledOptions; track option) {
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="options"
              [id]="option"
              [value]="option"
              [(ngModel)]="selectedAnswer"
            >
            <label class="form-check-label" [for]="option">
              {{ option }}
            </label>
          </div>
        }

        <button class="btn btn-primary mt-3" (click)="submitAnswer()">Submit Answer</button>

        @if (answerSubmitted) {
          <div class="mt-3">
            <div
              class="alert"
              [ngClass]="{
                'alert-success': isCorrect,
                'alert-danger': !isCorrect
              }"
            >
              {{ isCorrect ? 'Correct!' : '' }}
              @if (!isCorrect) {
                <ng-container>
                  Try again! You can review this part by
                  <a
                    [routerLink]="['/story', storyId]"
                    [queryParams]="{ page: question.hint }"
                  >clicking here</a>.
                </ng-container>
              }
            </div>
          </div>
        }
      </div>
    </div>

  </div>
</div>
