<div *ngIf="question" class="quiz-container">

  <mat-progress-bar
    mode="determinate"
    [value]="((currentQuestionIndex + 1) * 100) / totalQuestions">
  </mat-progress-bar>

  <!-- Title and progress -->
  <div style="display: flex; align-items: center; justify-content: space-between; padding: 0 1rem;">
    <h2>{{ title }}</h2>
    <a>Question {{ currentQuestionIndex + 1 }} of {{ totalQuestions }}</a>
  </div>

  <!-- Question display -->
  <div class="question-area">
    <app-mc-question
      [question]="question"
      [imagePath]="imagePath"
      [storyId]="storyId"
      (answerStatus)="onAnswerStatusChanged($event)"
      (answerSelected)="recordAnswer($event)"
    >
    </app-mc-question>
  </div>

  <!-- Navigation -->
  <div class="quiz-nav" style="display: flex; justify-content: space-between; padding: 0 1rem; margin-top: 1rem;">
    <button class="btn btn-secondary" (click)="prevQuestion()" [disabled]="currentQuestionIndex === 0">
      Previous
    </button>

    @if (currentQuestionIndex === (totalQuestions - 1)) {
      <button
        class="btn btn-primary"
        (click)="submitAnswers()"
        [disabled]="!isAnswerCorrect">
        Finish Quiz
      </button>
    } @else {
      <button
        class="btn btn-primary"
        (click)="nextQuestion()"
        [disabled]="!isAnswerCorrect">
        Next
      </button>
    }
  </div>
</div>

<div *ngIf="!question">
  <p>Loading quiz...</p>
</div>
